"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.applyDeviceTokenExists = applyDeviceTokenExists;
exports.bodiesPerLocales = bodiesPerLocales;
exports.getLocalesFromPush = getLocalesFromPush;
exports.groupByLocaleIdentifier = groupByLocaleIdentifier;
exports.isPushIncrementing = isPushIncrementing;
exports.stripLocalesFromBody = stripLocalesFromBody;
exports.transformPushBodyForLocale = transformPushBodyForLocale;
exports.validatePushType = validatePushType;
var _node = _interopRequireDefault(require("parse/node"));
var _deepcopy = _interopRequireDefault(require("deepcopy"));
function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
function isPushIncrementing(body) {
  if (!body.data || !body.data.badge) {
    return false;
  }
  const badge = body.data.badge;
  if (typeof badge == 'string' && badge.toLowerCase() == 'increment') {
    return true;
  }
  return typeof badge == 'object' && typeof badge.__op == 'string' && badge.__op.toLowerCase() == 'increment' && Number(badge.amount);
}
const localizableKeys = ['alert', 'title'];
function getLocalesFromPush(body) {
  const data = body.data;
  if (!data) {
    return [];
  }
  return [...new Set(Object.keys(data).reduce((memo, key) => {
    localizableKeys.forEach(localizableKey => {
      if (key.indexOf(`${localizableKey}-`) == 0) {
        memo.push(key.slice(localizableKey.length + 1));
      }
    });
    return memo;
  }, []))];
}
function transformPushBodyForLocale(body, locale) {
  const data = body.data;
  if (!data) {
    return body;
  }
  body = (0, _deepcopy.default)(body);
  localizableKeys.forEach(key => {
    const localeValue = body.data[`${key}-${locale}`];
    if (localeValue) {
      body.data[key] = localeValue;
    }
  });
  return stripLocalesFromBody(body);
}
function stripLocalesFromBody(body) {
  if (!body.data) {
    return body;
  }
  Object.keys(body.data).forEach(key => {
    localizableKeys.forEach(localizableKey => {
      if (key.indexOf(`${localizableKey}-`) == 0) {
        delete body.data[key];
      }
    });
  });
  return body;
}
function bodiesPerLocales(body, locales = []) {
  // Get all tranformed bodies for each locale
  const result = locales.reduce((memo, locale) => {
    memo[locale] = transformPushBodyForLocale(body, locale);
    return memo;
  }, {});
  // Set the default locale, with the stripped body
  result.default = stripLocalesFromBody(body);
  return result;
}
function groupByLocaleIdentifier(installations, locales = []) {
  return installations.reduce((map, installation) => {
    let added = false;
    locales.forEach(locale => {
      if (added) {
        return;
      }
      if (installation.localeIdentifier && installation.localeIdentifier.indexOf(locale) === 0) {
        added = true;
        map[locale] = map[locale] || [];
        map[locale].push(installation);
      }
    });
    if (!added) {
      map.default.push(installation);
    }
    return map;
  }, {
    default: []
  });
}

/**
 * Check whether the deviceType parameter in qury condition is valid or not.
 * @param {Object} where A query condition
 * @param {Array} validPushTypes An array of valid push types(string)
 */
function validatePushType(where = {}, validPushTypes = []) {
  var deviceTypeField = where.deviceType || {};
  var deviceTypes = [];
  if (typeof deviceTypeField === 'string') {
    deviceTypes.push(deviceTypeField);
  } else if (Array.isArray(deviceTypeField['$in'])) {
    deviceTypes.concat(deviceTypeField['$in']);
  }
  for (var i = 0; i < deviceTypes.length; i++) {
    var deviceType = deviceTypes[i];
    if (validPushTypes.indexOf(deviceType) < 0) {
      throw new _node.default.Error(_node.default.Error.PUSH_MISCONFIGURED, deviceType + ' is not supported push type.');
    }
  }
}
function applyDeviceTokenExists(where) {
  where = (0, _deepcopy.default)(where);
  if (!Object.prototype.hasOwnProperty.call(where, 'deviceToken')) {
    where['deviceToken'] = {
      $exists: true
    };
  }
  return where;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX2RlZXBjb3B5Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJpc1B1c2hJbmNyZW1lbnRpbmciLCJib2R5IiwiZGF0YSIsImJhZGdlIiwidG9Mb3dlckNhc2UiLCJfX29wIiwiTnVtYmVyIiwiYW1vdW50IiwibG9jYWxpemFibGVLZXlzIiwiZ2V0TG9jYWxlc0Zyb21QdXNoIiwiU2V0IiwiT2JqZWN0Iiwia2V5cyIsInJlZHVjZSIsIm1lbW8iLCJrZXkiLCJmb3JFYWNoIiwibG9jYWxpemFibGVLZXkiLCJpbmRleE9mIiwicHVzaCIsInNsaWNlIiwibGVuZ3RoIiwidHJhbnNmb3JtUHVzaEJvZHlGb3JMb2NhbGUiLCJsb2NhbGUiLCJkZWVwY29weSIsImxvY2FsZVZhbHVlIiwic3RyaXBMb2NhbGVzRnJvbUJvZHkiLCJib2RpZXNQZXJMb2NhbGVzIiwibG9jYWxlcyIsInJlc3VsdCIsImdyb3VwQnlMb2NhbGVJZGVudGlmaWVyIiwiaW5zdGFsbGF0aW9ucyIsIm1hcCIsImluc3RhbGxhdGlvbiIsImFkZGVkIiwibG9jYWxlSWRlbnRpZmllciIsInZhbGlkYXRlUHVzaFR5cGUiLCJ3aGVyZSIsInZhbGlkUHVzaFR5cGVzIiwiZGV2aWNlVHlwZUZpZWxkIiwiZGV2aWNlVHlwZSIsImRldmljZVR5cGVzIiwiQXJyYXkiLCJpc0FycmF5IiwiY29uY2F0IiwiaSIsIlBhcnNlIiwiRXJyb3IiLCJQVVNIX01JU0NPTkZJR1VSRUQiLCJhcHBseURldmljZVRva2VuRXhpc3RzIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiJGV4aXN0cyJdLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9QdXNoL3V0aWxzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXJzZSBmcm9tICdwYXJzZS9ub2RlJztcbmltcG9ydCBkZWVwY29weSBmcm9tICdkZWVwY29weSc7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1B1c2hJbmNyZW1lbnRpbmcoYm9keSkge1xuICBpZiAoIWJvZHkuZGF0YSB8fCAhYm9keS5kYXRhLmJhZGdlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgY29uc3QgYmFkZ2UgPSBib2R5LmRhdGEuYmFkZ2U7XG4gIGlmICh0eXBlb2YgYmFkZ2UgPT0gJ3N0cmluZycgJiYgYmFkZ2UudG9Mb3dlckNhc2UoKSA9PSAnaW5jcmVtZW50Jykge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIChcbiAgICB0eXBlb2YgYmFkZ2UgPT0gJ29iamVjdCcgJiZcbiAgICB0eXBlb2YgYmFkZ2UuX19vcCA9PSAnc3RyaW5nJyAmJlxuICAgIGJhZGdlLl9fb3AudG9Mb3dlckNhc2UoKSA9PSAnaW5jcmVtZW50JyAmJlxuICAgIE51bWJlcihiYWRnZS5hbW91bnQpXG4gICk7XG59XG5cbmNvbnN0IGxvY2FsaXphYmxlS2V5cyA9IFsnYWxlcnQnLCAndGl0bGUnXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2FsZXNGcm9tUHVzaChib2R5KSB7XG4gIGNvbnN0IGRhdGEgPSBib2R5LmRhdGE7XG4gIGlmICghZGF0YSkge1xuICAgIHJldHVybiBbXTtcbiAgfVxuICByZXR1cm4gW1xuICAgIC4uLm5ldyBTZXQoXG4gICAgICBPYmplY3Qua2V5cyhkYXRhKS5yZWR1Y2UoKG1lbW8sIGtleSkgPT4ge1xuICAgICAgICBsb2NhbGl6YWJsZUtleXMuZm9yRWFjaChsb2NhbGl6YWJsZUtleSA9PiB7XG4gICAgICAgICAgaWYgKGtleS5pbmRleE9mKGAke2xvY2FsaXphYmxlS2V5fS1gKSA9PSAwKSB7XG4gICAgICAgICAgICBtZW1vLnB1c2goa2V5LnNsaWNlKGxvY2FsaXphYmxlS2V5Lmxlbmd0aCArIDEpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gbWVtbztcbiAgICAgIH0sIFtdKVxuICAgICksXG4gIF07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2Zvcm1QdXNoQm9keUZvckxvY2FsZShib2R5LCBsb2NhbGUpIHtcbiAgY29uc3QgZGF0YSA9IGJvZHkuZGF0YTtcbiAgaWYgKCFkYXRhKSB7XG4gICAgcmV0dXJuIGJvZHk7XG4gIH1cbiAgYm9keSA9IGRlZXBjb3B5KGJvZHkpO1xuICBsb2NhbGl6YWJsZUtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgIGNvbnN0IGxvY2FsZVZhbHVlID0gYm9keS5kYXRhW2Ake2tleX0tJHtsb2NhbGV9YF07XG4gICAgaWYgKGxvY2FsZVZhbHVlKSB7XG4gICAgICBib2R5LmRhdGFba2V5XSA9IGxvY2FsZVZhbHVlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBzdHJpcExvY2FsZXNGcm9tQm9keShib2R5KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwTG9jYWxlc0Zyb21Cb2R5KGJvZHkpIHtcbiAgaWYgKCFib2R5LmRhdGEpIHtcbiAgICByZXR1cm4gYm9keTtcbiAgfVxuICBPYmplY3Qua2V5cyhib2R5LmRhdGEpLmZvckVhY2goa2V5ID0+IHtcbiAgICBsb2NhbGl6YWJsZUtleXMuZm9yRWFjaChsb2NhbGl6YWJsZUtleSA9PiB7XG4gICAgICBpZiAoa2V5LmluZGV4T2YoYCR7bG9jYWxpemFibGVLZXl9LWApID09IDApIHtcbiAgICAgICAgZGVsZXRlIGJvZHkuZGF0YVtrZXldO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIGJvZHk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBib2RpZXNQZXJMb2NhbGVzKGJvZHksIGxvY2FsZXMgPSBbXSkge1xuICAvLyBHZXQgYWxsIHRyYW5mb3JtZWQgYm9kaWVzIGZvciBlYWNoIGxvY2FsZVxuICBjb25zdCByZXN1bHQgPSBsb2NhbGVzLnJlZHVjZSgobWVtbywgbG9jYWxlKSA9PiB7XG4gICAgbWVtb1tsb2NhbGVdID0gdHJhbnNmb3JtUHVzaEJvZHlGb3JMb2NhbGUoYm9keSwgbG9jYWxlKTtcbiAgICByZXR1cm4gbWVtbztcbiAgfSwge30pO1xuICAvLyBTZXQgdGhlIGRlZmF1bHQgbG9jYWxlLCB3aXRoIHRoZSBzdHJpcHBlZCBib2R5XG4gIHJlc3VsdC5kZWZhdWx0ID0gc3RyaXBMb2NhbGVzRnJvbUJvZHkoYm9keSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBncm91cEJ5TG9jYWxlSWRlbnRpZmllcihpbnN0YWxsYXRpb25zLCBsb2NhbGVzID0gW10pIHtcbiAgcmV0dXJuIGluc3RhbGxhdGlvbnMucmVkdWNlKFxuICAgIChtYXAsIGluc3RhbGxhdGlvbikgPT4ge1xuICAgICAgbGV0IGFkZGVkID0gZmFsc2U7XG4gICAgICBsb2NhbGVzLmZvckVhY2gobG9jYWxlID0+IHtcbiAgICAgICAgaWYgKGFkZGVkKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbnN0YWxsYXRpb24ubG9jYWxlSWRlbnRpZmllciAmJiBpbnN0YWxsYXRpb24ubG9jYWxlSWRlbnRpZmllci5pbmRleE9mKGxvY2FsZSkgPT09IDApIHtcbiAgICAgICAgICBhZGRlZCA9IHRydWU7XG4gICAgICAgICAgbWFwW2xvY2FsZV0gPSBtYXBbbG9jYWxlXSB8fCBbXTtcbiAgICAgICAgICBtYXBbbG9jYWxlXS5wdXNoKGluc3RhbGxhdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKCFhZGRlZCkge1xuICAgICAgICBtYXAuZGVmYXVsdC5wdXNoKGluc3RhbGxhdGlvbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gbWFwO1xuICAgIH0sXG4gICAgeyBkZWZhdWx0OiBbXSB9XG4gICk7XG59XG5cbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgZGV2aWNlVHlwZSBwYXJhbWV0ZXIgaW4gcXVyeSBjb25kaXRpb24gaXMgdmFsaWQgb3Igbm90LlxuICogQHBhcmFtIHtPYmplY3R9IHdoZXJlIEEgcXVlcnkgY29uZGl0aW9uXG4gKiBAcGFyYW0ge0FycmF5fSB2YWxpZFB1c2hUeXBlcyBBbiBhcnJheSBvZiB2YWxpZCBwdXNoIHR5cGVzKHN0cmluZylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlUHVzaFR5cGUod2hlcmUgPSB7fSwgdmFsaWRQdXNoVHlwZXMgPSBbXSkge1xuICB2YXIgZGV2aWNlVHlwZUZpZWxkID0gd2hlcmUuZGV2aWNlVHlwZSB8fCB7fTtcbiAgdmFyIGRldmljZVR5cGVzID0gW107XG4gIGlmICh0eXBlb2YgZGV2aWNlVHlwZUZpZWxkID09PSAnc3RyaW5nJykge1xuICAgIGRldmljZVR5cGVzLnB1c2goZGV2aWNlVHlwZUZpZWxkKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGRldmljZVR5cGVGaWVsZFsnJGluJ10pKSB7XG4gICAgZGV2aWNlVHlwZXMuY29uY2F0KGRldmljZVR5cGVGaWVsZFsnJGluJ10pO1xuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgZGV2aWNlVHlwZXMubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgZGV2aWNlVHlwZSA9IGRldmljZVR5cGVzW2ldO1xuICAgIGlmICh2YWxpZFB1c2hUeXBlcy5pbmRleE9mKGRldmljZVR5cGUpIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IFBhcnNlLkVycm9yKFxuICAgICAgICBQYXJzZS5FcnJvci5QVVNIX01JU0NPTkZJR1VSRUQsXG4gICAgICAgIGRldmljZVR5cGUgKyAnIGlzIG5vdCBzdXBwb3J0ZWQgcHVzaCB0eXBlLidcbiAgICAgICk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcHBseURldmljZVRva2VuRXhpc3RzKHdoZXJlKSB7XG4gIHdoZXJlID0gZGVlcGNvcHkod2hlcmUpO1xuICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh3aGVyZSwgJ2RldmljZVRva2VuJykpIHtcbiAgICB3aGVyZVsnZGV2aWNlVG9rZW4nXSA9IHsgJGV4aXN0czogdHJ1ZSB9O1xuICB9XG4gIHJldHVybiB3aGVy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